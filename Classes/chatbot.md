# Chatbot Classes Documentation

## Chatbot

The `Chatbot` class serves as the base class for all types of chatbots within this framework. It provides fundamental functionalities such as message handling, chat saving, and basic initializations.

### Attributes:

- `json_save_path`: Optional; path to a JSON file where the chat history is saved.
- `docs_paths`: Optional; paths to documents that the chatbot might reference.
- `model_name`: The name of the language model used by the chatbot. Default is `"gpt-3.5-turbo"`.
    - `"gpt-4-turbo-preview"`
    - `"gpt-4"`
    - `"gpt-3.5-turbo-16k"`
    - `"gpt-3.5-turbo"`
- `max_tokens`: The maximum number of tokens to generate in the response. Default is `256`.
    - 0 -> 4095 - `"gpt-3.5-turbo"`, `"gpt-4-turbo-preview"`
    - 0 -> 8191 - `"gpt-4"`
    - 0 -> 16384 - `"gpt-3.5-turbo-16k"`
- `temperature`: Controls the randomness of the response. Default is `0.1`.
    - - 0.0 -> 2.0

### Methods:

- `add_message`: Adds a message to the chat history.
- `ask`: Abstract method, intended to be implemented by subclasses, to handle asking questions.
- `save_chat_to_json`: Saves the chat history to a JSON file.
- `save_chat_to_md`: Saves the chat history to a Markdown file.

## ChatGPT

Inherits from `Chatbot`. Initializes and utilizes a GPT chatbot, handling messaging and response generation specifically through an OpenAI model.

### Additional Attributes:

- `system_prompt`: Initial message or prompt by the system.

### Overridden Methods:

- `ask`: Handles asking a question and generating a response through the GPT model.

## SummarizerGPT

Inherits from `Chatbot`. A specialized OpenAI GPTChat for summarizing text provided by the user when asking questions.

### Additional Attributes:

- `system_prompt`: Initial message or prompt by the system.

### Overridden Methods:

- `ask`: Handles asking a question and generating a summary response through the GPT model.
**Arguments:**
    - `question`: The user's input before the text to be summarized.
    - `document_path`: The path to the document to be summarized.
    - `max_chunk_size`: 

## BigSummarizerGPT

Inherits from `Chatbot`. A specialized OpenAI GPTChat for summarizing large text provided by the user when asking questions.
Text is split into chunks and summarized individually before being combined into a final summary.

### Additional Attributes:

- `system_prompt`: Initial message or prompt by the system.

### Overridden Methods:

- `ask`: Handles asking a question and generating a summary response through the GPT model.
**Arguments:**
    - `question`: The user's input before the text to be summarized.
    - `document_path`: The path to the document to be summarized.
    - `max_chunk_size`: The maximum number of characters in each chunk.
    - `dict_max_tokens`: The maximum number of tokens in the dictionary.

## GPTs

Inherits from `Chatbot`. A specialized OpenAI GPT Assistant designed for handling specific tasks with additional features such as tool integration.

### Additional Attributes:

- `assistant_name`: The name of the assistant.
- `instructions`: Specific instructions for the assistant.
- `tools`: A list of tools that the assistant can use.
- `thread_id`: Identifier for a thread of conversation.
- `assistant_id`: Unique identifier for the assistant.
    - Default is `None`. If not provided, an assistant_id is automatically generated by creating a new assistant using the provided **assistant_name**, **instructions**, and **tools** parameters, along with the **model_name** from the inherited attributes.
    - When `assistant_id` is explicitly set, it initializes the assistant with this specified ID, assuming that an assistant with the given ID already exists or has been previously created. 

### Overridden Methods:

- `ask`: Manages asking questions and handling responses, integrating with external APIs if necessary.

## RetrieverChatbot

Inherits from `Chatbot`. This class introduces document retrieval functionality into the chatbot, allowing it to reference external documents when generating responses.

### Additional Attributes:

- `system_prompt`, `preprompt`, `question_prompt`: Various prompts used in building the user prompt.

    ---
    | Component          | Description                            |Example                                                                              |
    |--------------------|----------------------------------------|-------------------------------------------------------------------------------------|
    | **preprompt**      | Introduction to the relevant documents.|`Here are some relevant documents that might be helpful for the question:`           |
    | Document 1         |                                        |- **Source**: `Wikipedia.txt` <br> - **Content**: `Paris is the capital of France.`  |
    | Document 2         |                                        |- **Source**: `Wikipedia.txt` <br> - **Content**: `Berlin is the capital of Germany.`|
    | Document 3         |                                        |- **Source**: `Wikipedia.txt` <br> - **Content**: `London is the capital of England.`|
    | **question_prompt**|Introduction to the user's question.    |`Question:`                                                                          |
    | User's Question    |What is the capital of France?          |`What is the capital of France?`                                                     |
    ---

    **Example:**

    `Here are some relevant documents that might be helpful for the question`:

    Document 1 (Source: `Wikipedia.txt`):
    `Paris is the capital of France.`

    Document 2 (Source: `Wikipedia.txt`):
    `Berlin is the capital of Germany.`

    Document 3 (Source: `Wikipedia.txt`):
    `London is the capital of England.`

    `Question:` `What is the capital of France?`

- `retriever`: The document retriever object.
- `embedding_model`: The model used for embedding documents. Default is `"text-embedding-3-small"`.
    - `"text-embedding-3-small"`
    - `"text-embedding-3-large"`
- `splitter_chunk_size`, `splitter_chunk_overlap`: Parameters for splitting documents into manageable chunks.
- `k_docs`: The number of documents to retrieve.

### Overridden and New Methods:

- `get_retriever`: Returns the document retriever object.
- `set_preprompt`, `set_question_prompt`: Setters for modifying prompts.
- `load_docs`: Loads and processes documents from specified paths.
- `build_user_prompt`: Builds a comprehensive user prompt including relevant documents.
- `ask`: Handles asking questions with document retrieval involved.

## StandardRetrieverChatbot

Inherits from `RetrieverChatbot`. Utilizes a standard document retrieval method to aid in generating responses.

## MultiQueryRetrieverChatbot

Inherits from `RetrieverChatbot`. Integrates a MultiQueryRetriever with a language model for enhanced document retrieval and response generation.

### Additional Attributes:

- `llm_temperature`: Controls the randomness of the language model used for retrieval.

## MultiVectorRetrieverChatbot

Inherits from `RetrieverChatbot`. Employs a MultiVectorRetriever for advanced document retrieval capabilities, enabling more precise and relevant responses.